<?xml version="1.0" ?>
<project name="clean imports" default="help" basedir=".">

	<property file="local.properties"/>
	<property file="project.properties"/>
	<property name="classes" value="${basedir}/bin/classes" />
	<property name="classpath" value="${sdk.dir}/platforms/${target}/android.jar:${basedir}/libs:${classes}" />

	<taskdef name="cleanimps" classname="com.tombrus.cleanImports.ant.CleanImports" classpath="libs/cleanImports.jar" />

	<target name="cleanimports">
		<!-- make a new copy from the original dir -->
		<copy todir="src-clean">
			<fileset dir="src"/>
		</copy>

		<path id="project.javac.classpath">
			<path refid="project.all.jars.path" />
			<pathelement location="${android.classpath}" />
		</path>

		<!-- compile, to ensure it is ok -->
		<javac 
			bootclasspathref="project.target.class.path"
			classpathref="project.javac.classpath"
			includeantruntime="false" >
			<src path="src-clean" />
		</javac>

		<!-- clean the imports -->
		<cleanimps srcdir="src-clean">
			<cleanformat>
				<options  collapseAbove="2" blankLines="1" ambiguities="on"/>
				<import/>
				<import   comment="util imports:"    package="java.util"/>
				<import   comment="io imports:"      package="java.io"/>
				<options  blankLines="0"/>
				<import   own="true"/>
				<options  blankLines="4"/>
				<import   javalang="true"/>
			</cleanformat>
		</cleanimps>

		<!-- compile again to verify the imports were correctly cleaned -->
		<javac srcdir="src-clean"/>
	</target>

</project>
